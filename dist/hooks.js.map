{"version":3,"file":"hooks.js","sources":["../src/hooks.ts"],"sourcesContent":["let appState: Record<string, any> = {};\r\nconst mountQueue: (() => void)[] = [];\r\n\r\nlet appElement: HTMLDivElement;\r\nlet renderFunc: () => HTMLElement;\r\n\r\nexport function mountApp(root: HTMLDivElement, render: () => HTMLElement) {\r\n    appElement = root;\r\n    renderFunc = render;\r\n}\r\n\r\nfunction reRender() {\r\n\r\n    if (!appElement || !renderFunc) return;\r\n    \r\n    const appWrapper = appElement;\r\n    \r\n    appWrapper.innerHTML = '';\r\n    appWrapper.appendChild(renderFunc());\r\n    \r\n    while (mountQueue.length) {\r\n        const callback = mountQueue.shift()!;\r\n        callback();\r\n    }\r\n}\r\n\r\nexport function ReactiveState<T>(stateName: string, init: T) {\r\n\r\n    let value: T = appState[stateName] ?? init;\r\n    console.log(value)\r\n\r\n    const setValue = (newValue: T) => {\r\n        if (newValue !== value) {\r\n            value = newValue;\r\n            appState[stateName] = newValue;\r\n            reRender();\r\n        }\r\n    }\r\n\r\n    return [value, setValue];\r\n}\r\n\r\nexport function onMount(callback: () => void) {\r\n    mountQueue.push(callback);\r\n}"],"names":[],"mappings":"AAAA,IAAI,QAAQ,GAAwB,EAAE;AACtC,MAAM,UAAU,GAAmB,EAAE;AAErC,IAAI,UAA0B;AAC9B,IAAI,UAA6B;AAE3B,SAAU,QAAQ,CAAC,IAAoB,EAAE,MAAyB,EAAA;IACpE,UAAU,GAAG,IAAI;IACjB,UAAU,GAAG,MAAM;AACvB;AAEA,SAAS,QAAQ,GAAA;AAEb,IAAA,IAAI,CAAC,UAAU,IAAI,CAAC,UAAU;QAAE;IAEhC,MAAM,UAAU,GAAG,UAAU;AAE7B,IAAA,UAAU,CAAC,SAAS,GAAG,EAAE;AACzB,IAAA,UAAU,CAAC,WAAW,CAAC,UAAU,EAAE,CAAC;AAEpC,IAAA,OAAO,UAAU,CAAC,MAAM,EAAE;AACtB,QAAA,MAAM,QAAQ,GAAG,UAAU,CAAC,KAAK,EAAG;AACpC,QAAA,QAAQ,EAAE;IACd;AACJ;AAEM,SAAU,aAAa,CAAI,SAAiB,EAAE,IAAO,EAAA;IAEvD,IAAI,KAAK,GAAM,QAAQ,CAAC,SAAS,CAAC,IAAI,IAAI;AAC1C,IAAA,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC;AAElB,IAAA,MAAM,QAAQ,GAAG,CAAC,QAAW,KAAI;AAC7B,QAAA,IAAI,QAAQ,KAAK,KAAK,EAAE;YACpB,KAAK,GAAG,QAAQ;AAChB,YAAA,QAAQ,CAAC,SAAS,CAAC,GAAG,QAAQ;AAC9B,YAAA,QAAQ,EAAE;QACd;AACJ,IAAA,CAAC;AAED,IAAA,OAAO,CAAC,KAAK,EAAE,QAAQ,CAAC;AAC5B;AAEM,SAAU,OAAO,CAAC,QAAoB,EAAA;AACxC,IAAA,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC;AAC7B;;;;"}